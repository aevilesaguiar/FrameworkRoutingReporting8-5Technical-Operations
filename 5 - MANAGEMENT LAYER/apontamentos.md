## 5.1 Learning Objectives

After completing this chapter, you should be able to do the following: 

1 - Recall the major functions of the Management Layer.

2 - Describe the functions of each component of the Management Layer.

3 - Explain the data flow of the Management Layer.

4 - Explain the options for service availability.

5 - Observe the failover between primary and backup applications.

## 5.1 Objetivos de Aprendizagem

Depois de concluir este capítulo, você deve ser capaz de fazer o seguinte:

1 - Relembre as principais funções da Camada de Gerenciamento.

2 - Descreva as funções de cada componente da Camada de Gerenciamento.

3 - Explicar o fluxo de dados da Camada de Gerenciamento.

4 - Explique as opções de disponibilidade do serviço.

5 - Observe o failover entre aplicativos primários e de backup.


## 5.2 Management Layer

The Management Layer provides a kind of centralized mission control and is responsible for the following functions:

- Solution Control–The Management Layer manages startup, monitoring, and shutdown of applications and solutions.
- Alarm Processing–The Management Layer defines and detects conditions critical to solution operation. Alarm reactions can provide administrative alerts and application fault management.
- Fault Handling–The Management Layer detects and corrects situations that might cause problems for solution operation.
- Logging–The Management Layer stores the log messages in Log DB which is generated by the Message server. The log messages consists of Event ID, Application ID, Message, and Time Stamp.

A camada de gerenciamento fornece uma espécie de controle de missão centralizado e é responsável pelas seguintes funções:

- Controle de Soluções – A Camada de Gerenciamento gerencia a inicialização, monitoramento e desligamento de aplicativos e soluções.
- Processamento de Alarmes – A Camada de Gerenciamento define e detecta condições críticas para a operação da solução. As reações de alarme podem fornecer alertas administrativos e gerenciamento de falhas do aplicativo.
- Tratamento de Falhas – A Camada de Gerenciamento detecta e corrige situações que podem causar problemas para a operação da solução.
- Logging – A camada de gerenciamento armazena as mensagens de log no Log DB que é gerado pelo servidor de mensagens. As mensagens de log consistem em ID de evento, ID de aplicativo, mensagem e carimbo de data/hora.

![image](https://user-images.githubusercontent.com/52088444/158640682-b008d87a-58c7-4776-acff-b5bce3774f9c.png)

## 5.3 Framework Architecture: Management Layer


The following image outlines the five different layers of the Framework— the Management Layer is shown in detail along with its connections to the Configuration Layer. The Management Layer is made up of:

- Message Server
- DAP
- Log Database
- Solution Control Server (SCS)
- Local Control Agent (LCA)

A imagem a seguir descreve as cinco camadas diferentes da Estrutura — a Camada de Gerenciamento é mostrada em detalhes junto com suas conexões com a Camada de Configuração. A camada de gerenciamento é composta por:

- Servidor de mensagens
- DAP
- Banco de dados de registros
- Servidor de Controle de Soluções (SCS)
- Agente de Controle Local (LCA)

![image](https://user-images.githubusercontent.com/52088444/158641787-011de44f-fef2-4317-857c-e57c48e71bf2.png)

**Message Server**

The Message Server processes events logged by applications. These events are stored as log records in the Log Database. Message Server also checks for events configured to trigger alarms.

O Message Server processa eventos registrados por aplicativos. Esses eventos são armazenados como registros de log no banco de dados de log. O Message Server também verifica eventos configurados para acionar alarmes.

![image](https://user-images.githubusercontent.com/52088444/158643492-f139c364-95e2-459a-a0d5-76e2bb9f3c21.png)

Database Access Point

The DAP_JDBC Database Access Point describes the parameters for connecting to the Log Database. The Message Server would use this to connect to the Log Database.

O Ponto de Acesso do Banco de Dados DAP_JDBC descreve os parâmetros para conexão com o Banco de Dados de Log. O Message Server usaria isso para se conectar ao banco de dados de log.

![image](https://user-images.githubusercontent.com/52088444/158643958-d60b9d78-053a-4684-b090-b616311bf6e6.png)

**Log Database**

The Log Database stores all application log records, including interaction-related records, alarm history records, and audit records.
O banco de dados de registro armazena todos os registros de registro do aplicativo, incluindo registros relacionados à interação, registros de histórico de alarmes e registros de auditoria.

![image](https://user-images.githubusercontent.com/52088444/158644231-af35f5bb-aa79-42fa-89e6-3dbd701b3862.png)

**SCS**

SCS is the heart of the Management Layer. It knows how the applications are combined into solutions. SCS processes alarms, supports the starting and stopping of components, monitors the status of the environment, and provides restarts and switchovers.

O SCS é o coração da camada de gerenciamento. Ele sabe como os aplicativos são combinados em soluções. O SCS processa alarmes, suporta a partida e parada de componentes, monitora o status do ambiente e fornece reinicializações e alternâncias.

![image](https://user-images.githubusercontent.com/52088444/158644763-190156a9-6493-4363-aa35-6ea877e25add.png)

**LCA**

Local Control Agent is located on every host of the Management Layer and controls and/or monitors the local applications on the host. LCA reports the status of each host back to Solution Control Server. If SCS determines a restart is required on that host, LCA is used to start and stop the applications locally on its host. LCA is also used to detect application failures and communicate application roles in redundancy context.

O Local Control Agent está localizado em cada host da camada de gerenciamento e controla e/ou monitora os aplicativos locais no host. O LCA informa o status de cada host de volta ao Solution Control Server. Se o SCS determinar que uma reinicialização é necessária nesse host, o LCA será usado para iniciar e parar os aplicativos localmente em seu host. O LCA também é usado para detectar falhas de aplicativos e comunicar funções de aplicativos no contexto de redundância.

![image](https://user-images.githubusercontent.com/52088444/158645491-53e66411-b38b-4375-beb6-62f770cd5826.png)

